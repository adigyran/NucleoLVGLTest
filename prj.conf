CONFIG_GPIO=y
CONFIG_I2C=y
CONFIG_SPI=y
CONFIG_SERIAL=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_PRINTK=y
CONFIG_CPP=y
CONFIG_LOG=y
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_PROCESS_THREAD=y
CONFIG_LOG_BUFFER_SIZE=4096
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_RTC=y
CONFIG_SHELL=y
CONFIG_SHELL_BACKEND_SERIAL=y
CONFIG_CPU_LOAD=y
CONFIG_CPU_LOAD_LOG_PERIODICALLY=0
CONFIG_FPU=y
CONFIG_FPU_SHARING=y
CONFIG_THREAD_MONITOR=y
CONFIG_THREAD_NAME=y
CONFIG_THREAD_STACK_INFO=y
CONFIG_INIT_STACKS=y
CONFIG_THREAD_RUNTIME_STATS=y
CONFIG_SCHED_THREAD_USAGE=y
CONFIG_SCHED_THREAD_USAGE_ALL=y
CONFIG_SYS_HEAP_RUNTIME_STATS=y
CONFIG_MAIN_STACK_SIZE=8192
CONFIG_HEAP_MEM_POOL_SIZE=16384
CONFIG_LLEXT=y
CONFIG_LLEXT_IMPORT_ALL_GLOBALS=y
CONFIG_LLEXT_SHELL=y
CONFIG_LLEXT_HEAP_SIZE=16
CONFIG_SHELL_CMD_BUFF_SIZE=8192
CONFIG_SHELL_BACKEND_SERIAL_RX_RING_BUFFER_SIZE=4096
CONFIG_ARM_MPU=n
# D-cache отключён: SPI DMA требует некешируемую память,
# без D-cache проверка убирается и DMA работает со всей SRAM.
# На 480 MHz H743 это дешевле, чем polling SPI.
CONFIG_DCACHE=n
# SPI DMA — освобождает CPU во время передачи на дисплей
CONFIG_DMA=y
CONFIG_DMA_STM32=y
CONFIG_SPI_STM32_DMA=y
CONFIG_DISPLAY=y
CONFIG_SSD1351=y
CONFIG_SSD135X_DEFAULT_CONTRAST=255
CONFIG_SSD135X_CONTRASTA=255
CONFIG_SSD135X_CONTRASTB=255
CONFIG_SSD135X_CONTRASTC=255
CONFIG_LVGL=y
CONFIG_LV_COLOR_DEPTH_16=y
# Порядок байт RGB565 под SSD1351 (старший байт первым)
CONFIG_LV_COLOR_16_SWAP=y
CONFIG_LV_Z_MEM_POOL_SIZE=65536
CONFIG_LV_FONT_MONTSERRAT_12=y
CONFIG_LV_FONT_MONTSERRAT_14=y
CONFIG_LV_FONT_MONTSERRAT_20=y
# Полный рефреш: рендерим весь экран за один DMA-проход
CONFIG_LV_Z_FULL_REFRESH=y
CONFIG_LV_Z_VDB_SIZE=100
# LVGL работает на собственном workqueue — main-тред освобождён
CONFIG_LV_Z_RUN_LVGL_ON_WORKQUEUE=y
CONFIG_LV_Z_LVGL_WORKQUEUE_STACK_SIZE=6144
# Приоритет workqueue ниже main (0), выше LED-тредов (9)
CONFIG_LV_Z_LVGL_WORKQUEUE_PRIORITY=3
# Таргет ~60 FPS — LVGL проверяет таймеры каждые 16 мс
CONFIG_LV_DEF_REFR_PERIOD=16
# Аппаратный акселератор DMA2D на STM32H743
CONFIG_LV_USE_DRAW_DMA2D=y
CONFIG_LV_Z_DOUBLE_VDB=y
CONFIG_LV_DRAW_DMA2D_HAL_INCLUDE="stm32h7xx.h"
